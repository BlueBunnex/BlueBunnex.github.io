<!DOCTYPE html>
<html lang="en">
    <head>
        <title>kitsumitsu.de</title>
        <link rel="icon" type="image/x-icon" href="img/purdy_ico.ico"/>
        <script src="https://kit.fontawesome.com/30792084b2.js" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="style.css">
        <script src="script.js"></script>
        <script src="auto.js"></script>
        <script src="characters.js"></script>
        <meta charset="UTF-8">
        <style>
            
            /* search (sidebar) stuff */
            #search {
                display: inline-block;
                flex: 0 0 188px;
                border-radius: 4px;
                padding: 10px;
                padding-top: 12px;
                text-align: left;
                min-height: calc(100vh - 150px);
            }
            
            /* character stuff */
            #character {
                display: inline-block;
                flex: 1;
                padding-left: 14px;
            }
            
            #character p {
                text-align: justify;
                text-justify: inter-word;
                text-indent: 2.5em;
                line-height: 1.7em;
            }
            
            #character-table td {
                text-align: left;
            }
            
            #character-header {
                margin-top: 24px;

                position: relative;
                border-top-style: solid;
                border-width: 2px;
                border-color: var(--ten);

                color: var(--ten);
            }

            #character-header span {
                background: white;
                /*
                position: absolute;
                top: -13px;
                left: 10px;
                */
            }
            
            #character-facts {
                text-align: left;
                margin-top: 16px;
                height: auto;
                display: none;
                font-size: 13px; /* match with p */
            }
            
            #character-facts h3, #character-design h3 {
                margin: 0 0 5px 0;
                font-size: 18px;
            }
            
            #character-facts ul {
                margin: 0;
                list-style-type: disc;
                padding-left: 2em;
            }
            
            #character-design {
                display: none;
                position: relative;
            }

            #character-design a {
                color: var(--ten-dark);
                position: absolute; 
                top: 12px; 
                right: 16px;
            }

            #character-design a:hover {
                text-decoration: underline;
            }

            #character-gallery {
                display: none;
                position: relative;
            }

            #character-image {
                margin-left: 50%;
                transform: translateX(-50%);
                height: 240px;
            }

            #right, #left {
                font-size: 30px;
                cursor: pointer;
                position: absolute;
                color: var(--ten-dark);
                top: 50%;
                transform: translateY(-50%);
                transition-duration: 0.2s;
            }

            #right { right: 6px; }
            #right:hover { padding-right: 6px; }
            #right:active { padding-right: 9px; }
            
            #left { left: 6px; }
            #left:hover { padding-left: 6px; }
            #left:active { padding-left: 9px; }
            
            #character-colors {
                width: calc(100% - 72px);
                transform: translateY(4px);
                display: inline-flex;
                overflow: hidden;
                
                border-radius: 4px;
                border-width: 2px;
                border-style: solid;
            }
            
            .color-cel {
                display: inline-block;
                height: 20px;
                flex: 1;
            }
            
            #character-table {
                margin-top: 30px;
            }
            
            #character-table th {
                text-align: right;
                vertical-align: top;
                padding-right: 1em;
            }
            
        </style>
    </head>
    <body onload="auto();">

        <!-- central stuff area -->
        <div id="central">

            <!-- content -->
            <div style="padding: 16px; display: flex;">
                
                <!-- left selection area -->
                <span id="search" class="lefted-border">
                    <!-- buttons are automagically filled in above this comment through the even more above script -->

                    <!--
                    <p style="font-style: italic; color: var(--thirty-contrast); font-size: 10px; padding: 0px; margin: 1px; margin-top: 15px; width: 100%;">
                        The kitsumitsuverse is a collection of my original characters. You may include them in your own work provided you give due credit, and preferrably (say hi on my cohost)
                    </p>
                    -->
                </span>
                
                <!-- right character area -->
                <span id="character">
                    
                    <h2 id="character-header"><span>Click a name!</span></h2>
                    
                    <table id="character-table" style="width: 100%;"></table>
                    
                    <div id="character-gallery" class="text-block">
                        <img id="character-image" src="">
                        <span id="right" onclick="UpdateGallery(1);"><i class="fa-solid fa-angles-right"></i></span>
                        <span id="left" onclick="UpdateGallery(-1);"><i class="fa-solid fa-angles-left"></i></span>
                    </div>
                    
                    <div id="character-facts" class="text-block"></div>

                    <div id="character-design" class="text-block">
                        <!-- contains a div with id=character-colors after generation -->
                    </div>

                    <span id="character-paragraphs">
                        <p>
                            Welcome to my OC page. All my favourite OCs are featured on the left. <strong>All my characters are adults.</strong>
                        </p>
                    </span>
                    
                </span>
                
                <!--
                Character Short Stories          See All ->
                *title* lorem Ipsum...
                (procedurally loads in paragraphs)
                (Newer stories are higher, but OVERVIEW is always on top)
                (Stories are self contained, based on OVERVIEW that is a character lore blurb on main page)
                -->
                
                <!-- script for loading characters on button press -->
                <!-- https://flexiple.com/javascript/loop-through-object-javascript/ -->
                <script>

                    var galleryIndex = 0;
                    var char;

                    function UpdateGallery(value) {
                        if (value != 0 && char['imgs'].length == 1) {
                            alert("This character has only one image :3");
                        } else {
                            galleryIndex += value;
    
                            if (galleryIndex < 0) {
                                galleryIndex += char['imgs'].length;
                            } else {
                                galleryIndex %= char['imgs'].length;
                            }
    
                            document.getElementById("character-image").src = "img/universe/" + char['imgs'][galleryIndex];
                        }
                    }
                    
                    function LoadCharacter(cid) {
                        galleryIndex = 0;
                        char = characterInfo[cid];
                        
                        // character header
                        document.getElementById("character-header").innerHTML = "<span>" + char['name'] + "</span>";
                        
                        // character image (optional)
                        if (char['imgs'] == null) {
                            document.getElementById("character-gallery").style.display = "none";
                        } else {
                            UpdateGallery(0);
                            document.getElementById("character-gallery").style.display = "block";
                        }
                        
                        // character paragraphs
                        var construct = "";
                        char['paragraphs'].forEach(
                            item => {
                                construct += "<p>" + item + "</p>";
                            }
                        );
                        document.getElementById("character-paragraphs").innerHTML = construct;
                        
                        // character facts (optional)
                        if (char['facts'] == null || char['facts'].length == 0) {
                            document.getElementById("character-facts").style.display = "none";
                        } else {
                            construct = "<h3>Fast Facts</h3><ul>";
                            char['facts'].forEach(
                                item => {
                                    construct += "<li>" + item + "</li>";
                                }
                            );
                            construct += "</ul>";
                            document.getElementById("character-facts").innerHTML = construct;
                            document.getElementById("character-facts").style.display = "block";
                        }
                        
                        // design (mandatory) + colors (optional) + reference (optional)
                        construct = `
                            <h3>Design</h3>
                            
                            <strong>Body</strong>
                            <p>` + char['body'] + `</p>

                            <strong>Clothing</strong>
                            <p>` + char['clothing'] + `</p>

                            <strong>Personality</strong>
                            <p>` + char['personality'] + `</p>
                        `;

                        if (char['reference'] != null) {
                            construct += `<!-- ref sheet button -->
                            <a href="img/universe/` + char['reference'] + `">Reference Sheet <i class="fa-solid fa-right-to-bracket"></i></a>`;
                        }

                        if (char['colors'] != null) {
                            construct += `
                                <!-- palette -->
                                <span style="margin-right: 6px; font-weight: 800;">Palette:</span>
                                <span id="character-colors">
                            `;
                            
                            char['colors'].forEach(
                                item => {
                                    construct += '<span class="color-cel" style="background: ' + item + ';"></span>';
                                }
                            );
                            construct += "</span>";
                        }
                        
                        document.getElementById("character-design").innerHTML = construct;
                        document.getElementById("character-design").style.display = "block";

                        // table (optional)
                        if (char['table_data'] == null) {
                            document.getElementById("character-table").style.display = "none";
                        } else {
                            construct = "";
                            
                            const pairs = Object.entries(char['table_data']);
                            for (let i = 0; i < pairs.length; i++) {
                                // only does one data pair per row
                                // remember, .replace() only changes the first instance unless a regex is supplied <3
                                construct += "<tr><th>" + pairs[i][0].replace('_', ' ') + ":</th><td>" + pairs[i][1] + "</td></tr>";
                            }

                            document.getElementById("character-table").innerHTML = construct;
                            document.getElementById("character-table").style.display = "block";
                        }
                    }

                    // load all info into selection area to be allowed to be selected
                    var buttons = "";
                    for (const [key, value] of Object.entries(characterInfo)) {
                        buttons += `<button type="button" class="search-button" onclick="LoadCharacter('` + key + `')">` + value['name'] + `<br><span style="font-weight: 400;">` + value['tagline'] + `</span></button>`;
                    }
                    document.getElementById("search").innerHTML = buttons + document.getElementById("search").innerHTML;
                    
                </script>

            </div>

        </div>

    </body>
</html>
