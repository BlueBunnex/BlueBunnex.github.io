<!DOCTYPE html>
<html lang="en">
    <head>
        <title>kitsumitsu.de</title>
        <link rel="icon" type="image/x-icon" href="img/purdy_ico.ico"/>
        <script src="https://kit.fontawesome.com/30792084b2.js" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="style.css">
        <script src="script.js"></script>
        <script src="characters.js"></script>
        <meta charset="UTF-8">
        <style>
            
            /* search (sidebar) stuff */
            #search {
                display: inline-block;
                flex: 0 0 188px;
                border-radius: 4px;
                padding: 10px;
                padding-top: 12px;
                text-align: left;
            }
            
            /* character stuff */
            #character {
                display: inline-block;
                flex: 1;
                padding-left: 14px;
            }
            
            #character p {
                text-align: justify;
                text-justify: inter-word;
                text-indent: 2.5em;
                line-height: 1.7em;
            }
            
            #character-table td {
                text-align: left;
            }
            
            #character-header {
                margin-top: 24px;
            }
            
            #character-facts {
                display: inline-block;
                text-align: left;
                margin-top: 16px;
                height: auto;
                display: none;
                font-size: 13px; /* match with p */
            }
            
            #character-facts h3, #character-design h3 {
                margin: 0 0 5px 0;
                font-size: 18px;
            }
            
            #character-facts ul {
                margin: 0;
                list-style-type: disc;
                padding-left: 2em;
            }
            
            #character-design {
                display: none;
            }
            
            #character-colors {
                width: calc(100% - 72px);
                transform: translateY(4px);
                display: inline-flex;
                overflow: hidden;
                
                border-radius: 4px;
                border-width: 2px;
                border-style: solid;
            }
            
            .color-cel {
                display: inline-block;
                height: 20px;
                flex: 1;
            }
            
            #character-img {
                width: 40%;
                float: right;
                padding-left: 20px;
            }
            
            #character-table {
                margin-top: 30px;
            }
            
            #character-table th {
                text-align: right;
                vertical-align: top;
                padding-right: 1em;
            }
            
        </style>
    </head>
    <body>

        <!-- central stuff area -->
        <div id="central">
            
            <!-- back button -->
            <button id="back-button" type="button" onclick="location.href='index.html'">Back</button>

            <!-- content -->
            <div style="padding: 16px; display: flex;">
                
                <!-- left selection area -->
                <span id="search" class="lefted-border">
                    <!-- buttons are automagically filled in above this comment through the even more above script -->
                    
                    <hr>
                    
                    <p style="font-style: italic; color: var(--thirty-contrast); font-size: 10px; padding: 0px; margin: 1px; width: 100%;">
                        The kitsumitsuverse is a collection of original characters that I post drawings of on Twitter. You may include them in your own work provided you give due credit, and preferrably mention me <a href="https://twitter.com/kitsumitsu46">@kitsumitsu46</a>!
                    </p>
                </span>
                
                <!-- right character area -->
                <span id="character">
                    
                    <h2 id="character-header"><i class="fa-sharp fa-solid fa-arrow-left fa-beat"></i> click a name!</h2>
                    
                    <table id="character-table" style="width: 100%;"></table>
                    
                    <div id="character-facts" class="text-block"></div>

                    <div id="character-design" class="text-block">
                    <!-- contains a div with id=character-colors after generation -->
                    </div>
                    
                    <img id="character-img" src="">

                    <span id="character-paragraphs"></span>
                    
                </span>
                
                <!--
                Character Short Stories          See All ->
                *title* lorem Ipsum...
                (procedurally loads in paragraphs)
                (Newer stories are higher, but OVERVIEW is always on top)
                (Stories are self contained, based on OVERVIEW that is a character lore blurb on main page)
                -->
                
                <!-- script for loading characters on button press -->
                <!-- https://flexiple.com/javascript/loop-through-object-javascript/ -->
                <script>

                    function LoadCharacter(cid) {
                        // character header
                        document.getElementById("character-header").innerHTML = characterInfo[cid]['name'];
                        
                        // character image (optional)
                        if (characterInfo[cid]['img'] == null || characterInfo[cid]['img'] == "") {
                            document.getElementById("character-img").style.display = "none";
                        } else {
                            document.getElementById("character-img").src = "img/universe/" + characterInfo[cid]['img'];
                            document.getElementById("character-img").style.display = "block";
                        }
                        
                        // character paragraphs
                        var construct = "";
                        characterInfo[cid]['paragraphs'].forEach(
                            item => {
                                construct += "<p>" + item + "</p>";
                            }
                        );
                        document.getElementById("character-paragraphs").innerHTML = construct;
                        
                        // character facts (optional)
                        if (characterInfo[cid]['facts'] == null || characterInfo[cid]['facts'].length == 0) {
                            document.getElementById("character-facts").style.display = "none";
                        } else {
                            construct = "<h3>Fast Facts</h3><ul>";
                            characterInfo[cid]['facts'].forEach(
                                item => {
                                    construct += "<li>" + item + "</li>";
                                }
                            );
                            construct += "</ul>";
                            document.getElementById("character-facts").innerHTML = construct;
                            document.getElementById("character-facts").style.display = "block";
                        }
                        
                        // design + colors (optional)
                        if (characterInfo[cid]['design'] == null || characterInfo[cid]['colors'] == null) {
                            document.getElementById("character-design").style.display = "none";
                        } else {
                            construct = `
                                <h3>Design</h3>
                                <p>` + characterInfo[cid]['design'] + `</p>
                                <span style="margin-right: 6px; font-weight: 800;">Palette:</span>
                                <span id="character-colors">
                            `;
                            
                            characterInfo[cid]['colors'].forEach(
                                item => {
                                    construct += '<span class="color-cel" style="background: ' + item + ';"></span>';
                                }
                            );
                            construct += "</span>";
                            
                            document.getElementById("character-design").innerHTML = construct;
                            document.getElementById("character-design").style.display = "block";
                        }

                        // table (optional)
                        if (characterInfo[cid]['table_data'] == null) {
                            document.getElementById("character-table").style.display = "none";
                        } else {
                            construct = "";
                            
                            const pairs = Object.entries(characterInfo[cid]['table_data']);
                                for (let i = 0; i < pairs.length; i++) {
                                    // only does one data pair per row
                                    // remember, .replace() only changes the first instance unless a regex is supplied <3
                                    construct += "<tr><th>" + pairs[i][0].replace('_', ' ') + ":</th><td>" + pairs[i][1] + "</td></tr>";
                                }
//                             for (let i = 0; i < pairs.length - 1; i += 2) {
//                                 construct += "<tr>";
//                                 construct += "<th>" + pairs[i][0] + ":</th><td>" + pairs[i][1] + "</td>";
//                                 construct += "<th>" + pairs[i+1][0] + ":</th><td>" + pairs[i+1][1] + "</td>";
//                                 construct += "</tr>";
//                             }
//                             if (pairs.length % 2 == 1) { // in case uneven amount, one must enter a row ALONE...
//                                 construct += "<tr>";
//                                 construct += "<th>" + pairs[pairs.length-1][0] + ":</th><td>" + pairs[pairs.length-1][1] + "</td>";
//                                 construct += "</tr>";
//                             }

                            document.getElementById("character-table").innerHTML = construct;
                            document.getElementById("character-table").style.display = "block";
                        }
                    }

                    // load all info into selection area to be allowed to be selected
                    var buttons = "";
                    for (const [key, value] of Object.entries(characterInfo)) {
                        buttons += `<button type="button" class="search-button" onclick="LoadCharacter('` + key + `')"><i class="fa-solid fa-user"></i> ` + value['name'] + `</button>`;
                    }
                    document.getElementById("search").innerHTML = buttons + document.getElementById("search").innerHTML;
                    
                </script>

            </div>

            <!-- copyright -->
            <br><br>
            <span style="text-align: center; color: var(--thirty-contrast); font-size: 12px; width: 100%; position: absolute; bottom: 10px; transform: translateX(-50%);">
                © 2023 Kitsumitsu46. All Rights Reserved. <i class="fa-solid fa-heart" style="color: pink;"></i>
            </span>

        </div>

    </body>
</html>
